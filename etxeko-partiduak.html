<!DOCTYPE html>
<html lang="eu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Etxeko partiduak ‚Äì Larraun Pilota Elkartea</title>

<meta property="og:title" content="Etxeko partiduak ‚Äì Larraun Pilota Elkartea">
<meta property="og:description" content="Aste honetako partiduak Lekunberrin eta Aldatzen">
<meta property="og:image" content="https://larraunpilota.eus/og-etxeko-partiduak.png">
<meta property="og:url" content="https://larraunpilota.eus/etxeko-partiduak.html">
<meta property="og:type" content="website">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">


<style>
body{
  font-family: Arial, Helvetica, sans-serif;
  background:#f4f4f4;
  margin:0;
  padding:20px;
}

header{
  text-align:center;
  margin-bottom:25px;
}

header img{
  height:80px;
}

h1{
  margin:10px 0 0;
  color:#004d40;
}

#content{
  max-width:900px;
  margin:auto;
}

/* ===== D√çA ===== */
.day-separator{
  margin:36px 0 18px;
  text-align:center;
  font-weight:900;
  font-size:1.1em;
  color:#333;
}

/* ===== GRUPO ===== */
.group{
  margin-bottom:22px;
  border-radius:14px;
  overflow:hidden;
  box-shadow:0 4px 10px rgba(0,0,0,.2);
}

.group.no-oficial{
  background:#f0f0f0;
}

/* CABECERA */
.group-header{
  padding:14px 18px;
  color:#fff;
}

.jai-alai .group-header{ background:#1565c0; }
.trinkete .group-header{ background:#ad1457; }

.lekunberri .group-header{ box-shadow: inset 0 0 0 4px #1b5e20; }
.aldatz .group-header{ box-shadow: inset 0 0 0 4px #4e342e; }

.fronton{
  font-size:1.25em;
  font-weight:900;
}

.datetime{
  font-size:1em;
  margin-top:4px;
}

/* CUERPO */
.group-body{
  background:#fff;
  padding:16px 18px;
}

.match{
  padding-top:12px;
  margin-top:12px;
  border-top:1px solid #ddd;
}

.torneo{
  font-size:1.1em;
  font-weight:900;
  margin-bottom:6px;
}

.etxekoa{ color:#0d47a1; font-weight:700; }
.kanpokoa{ color:#b71c1c; font-weight:700; }
</style>
</head>

<body>

<header>
  <img src="images/etxekoak.jpg" alt="Larraun Pilota">
  <h1>Etxeko partiduak</h1>
</header>

<div id="content"></div>

<script>
/* ===== FECHAS ===== */
function monday(d){
  const x=new Date(d);
  const day=x.getDay()||7;
  if(day!==1) x.setDate(x.getDate()-day+1);
  x.setHours(0,0,0,0);
  return x;
}

function dayEU(d){
  const days=["IGANDEA","ASTELEHENA","ASTEARTEA","ASTEAZKENA","OSTEGUNA","OSTIRALA","LARUNBATA"];
  const months=["URTARRILA","OTSAILA","MARTXOA","APIRILA","MAIATZA","EKAINA","UZTAILA","ABUZTUA","IRAILA","URRIA","AZAROA","ABENDUA"];
  return `${days[d.getDay()]} ¬∑ ${d.getDate()} ${months[d.getMonth()]}`;
}

Promise.all([
  fetch("data/cartelera-larraun.json").then(r=>r.json()),
  fetch("data/partidos-no-oficiales.json").then(r=>r.json())
]).then(([oficiales,noOficiales])=>{

  const partidos=[...oficiales.map(p=>({...p,ofiziala:true})),...noOficiales];

  const today=new Date();
  today.setHours(0,0,0,0);
  const mon=monday(today);
  const sun = new Date(mon);
  sun.setDate(mon.getDate() + 6);
  sun.setHours(23, 59, 59, 999);


  const data=partidos.filter(p=>{
    if(!/lekunberri|aldatz/i.test(p.fronton||"")) return false;
    const d=new Date(`${p.fecha} ${p.hora||"00:00"}`);
    return d>=mon && d<=sun;
  });

  data.sort((a,b)=>{
    const da=new Date(`${a.fecha} ${a.hora||"00:00"}`);
    const db=new Date(`${b.fecha} ${b.hora||"00:00"}`);
    if(da-db!==0) return da-db;
    return (a.fronton||"").localeCompare(b.fronton||"");
  });

  const cont=document.getElementById("content");
  let lastDay="";

  data.forEach(p=>{
    const d=new Date(`${p.fecha} ${p.hora||"00:00"}`);
    const dayKey=d.toDateString();

    if(dayKey!==lastDay){
      cont.innerHTML+=`<div class="day-separator">‚Äî ${dayEU(d)} ‚Äî</div>`;
      lastDay=dayKey;
    }

    const key=`${p.fronton}|${p.fecha}|${p.hora}`;
    if(document.getElementById(key)) return;

    const bloque=data.filter(x=>`${x.fronton}|${x.fecha}|${x.hora}`===key);
    const b0=bloque[0];

    const group=document.createElement("div");
    group.id=key;
    group.className="group"+
      (!b0.ofiziala?" no-oficial":"")+
      (/trinkete/i.test(b0.fronton)?" trinkete":" jai-alai")+
      (/lekunberri/i.test(b0.fronton)?" lekunberri":" aldatz");

    group.innerHTML=`
      <div class="group-header">
        <div class="fronton">üìç ${b0.fronton}</div>
        <div class="datetime">üóì ${b0.fecha} ¬∑ ‚è∞ ${b0.hora||""}</div>
      </div>
      <div class="group-body"></div>
    `;

    const body=group.querySelector(".group-body");

    bloque.forEach((m,i)=>{
      body.innerHTML+=`
        <div class="match">
          <div class="torneo">${i+1} ¬∑ ${m.lehiaketa||""}</div>
          <div class="etxekoa">üè† ${m.etxekoa||""}</div>
          <div class="kanpokoa">‚úàÔ∏è ${m.kanpokoak||""}</div>
        </div>
      `;
    });

    cont.appendChild(group);
  });
});
</script>

</body>
</html>
