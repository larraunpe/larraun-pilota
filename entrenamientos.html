<!DOCTYPE html>
<html lang="eu">
<head>
<meta charset="UTF-8">
<title>Entrenamenduak | Larraun Pilota Elkartea</title>

<style>
body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:#f4f4f4;
  color:#222;
}

header{
  background:#004d40;
  color:#fff;
  padding:20px;
  text-align:center;
}

main{
  max-width:1200px;
  margin:auto;
  padding:30px 20px;
}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
  gap:24px;
}

.card{
  background:#fff;
  border-radius:14px;
  box-shadow:0 4px 12px rgba(0,0,0,.15);
  overflow:hidden;
}

.card h2{
  margin:0;
  padding:16px;
  color:#fff;
  font-size:1.2em;
}

.card .content{
  padding:16px;
}

/* ===== CABECERAS ===== */
.esku-julen h2{background:#2e7d32;}
.esku-barriola h2{background:#1565c0;}
.pala h2{background:#6a1b9a;}

/* ===== GRUPOS (COLOR BASE) ===== */
.group{
  margin-bottom:14px;
  border-radius:10px;
  padding:10px 12px;
}

.aurrebenjaminak{background:#f1e0c5;}
.benjaminak{background:#ffcc80;}
.alebinak{background:#fff59d;}
.infantilak{background:#a5d6a7;}
.kadeteak{background:#81d4fa;}
.jubenilak{background:#90caf9;}
.nagusiak{background:#90a4ae;}

.group h3{
  margin:0 0 6px;
  font-size:0.95em;
}

ul{
  margin:0;
  padding-left:18px;
}

/* ===== PELOTARI ===== */
li{
  position:relative;
  font-size:0.9em;
  line-height:1.4;
  padding:3px 6px;
  border-radius:6px;
  margin-bottom:3px;
  overflow:hidden;
}

/* ===== SOMBREADO POR EDAD (OVERLAY) ===== */
li::after{
  content:"";
  position:absolute;
  inset:0;
  opacity:.35;
  pointer-events:none;
}

li.edad-aurrebenjaminak::after{background:#f1e0c5;}
li.edad-benjaminak::after{background:#ffb74d;}
li.edad-alebinak::after{background:#fff176;}
li.edad-infantilak::after{background:#81c784;}
li.edad-kadeteak::after{background:#4fc3f7;}
li.edad-jubenilak::after{background:#1e88e5;} /* azul oscuro */
li.edad-nagusiak::after{background:#607d8b;}
</style>
</head>

<body>

<header>
  <h1>ENTRENAMENDUAK</h1>
</header>

<main>
<div class="grid">

  <div class="card esku-julen">
    <h2>ü§æ Eskupilota ¬∑ TXIKI</h2>
    <div class="content" id="esku-julen"></div>
  </div>

  <div class="card esku-barriola">
    <h2>ü§æ Eskupilota ¬∑ HELDU</h2>
    <div class="content" id="esku-barriola"></div>
  </div>

  <div class="card pala">
    <h2>üèì Pala</h2>
    <div class="content" id="pala"></div>
  </div>

</div>
</main>

<script>
const contenedores = {
  "ESKU PILOTA": {
    "TXIKI": "esku-julen",
    "HELDU": "esku-barriola"
  },
  "PALA GOMA": {
    "*": "pala"
  }
};

function categoriaPorAnio(anio){
  if (anio >= 2018) return "aurrebenjaminak";
  if (anio >= 2016) return "benjaminak";
  if (anio >= 2014) return "alebinak";
  if (anio >= 2012) return "infantilak";
  if (anio >= 2010) return "kadeteak";
  if (anio >= 2008) return "jubenilak";
  return "nagusiak";
}

function raizCategoria(cat){
  return cat.toLowerCase()
    .replace(/\s+[ab12]$/,"")
    .replace(/\s+/g,"");
}

fetch('/data/pelotariak.json')
.then(r => r.json())
.then(data => {

  const grupos = {};

  data.forEach(p => {
    const key = p.MODALITATEA + "|" + p.TALDEA + "|" + p.KATEGORIA;
    if (!grupos[key]) grupos[key] = [];
    grupos[key].push(p);
  });

  Object.entries(grupos).forEach(([key, pelotaris]) => {
    const [modalitatea, taldea, categoria] = key.split("|");

    const cont =
      contenedores[modalitatea]?.[taldea] ||
      contenedores[modalitatea]?.["*"];

    if (!cont) return;

    const grupo = document.createElement("div");
    grupo.className = "group " + raizCategoria(categoria);

    const h3 = document.createElement("h3");
    h3.textContent = categoria;
    grupo.appendChild(h3);

    const ul = document.createElement("ul");

    pelotaris
      .sort((a,b)=>a.Izena.localeCompare(b.Izena))
      .forEach(p=>{
        const li = document.createElement("li");
        li.textContent = p.Izena;
        li.classList.add("edad-" + categoriaPorAnio(p.URTEA));
        ul.appendChild(li);
      });

    grupo.appendChild(ul);
    document.getElementById(cont).appendChild(grupo);
  });
});
</script>

</body>
</html>
