<!DOCTYPE html>
<html lang="eu">
<head>
<meta charset="UTF-8" />
<title>Larraun Kartela</title>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<style>

body{
  margin:0;
  background:#1b4d31;
  font-family:"Trebuchet MS","Arial Black",sans-serif;
}

.exportar{
  text-align:center;
  margin:18px;
}

/* ================= P√ÅGINA ================= */

.pagina{
  width:900px;
  height:1400px;
  margin:25px auto;

  position:relative;
  overflow:hidden;

  display:flex;
  flex-direction:column;

  background:#3f8159;
}

/* textura */
.pagina::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background:
    repeating-linear-gradient(45deg,rgba(255,255,255,.03) 0 2px,rgba(0,0,0,.04) 2px 4px);
}

/* ================= HEADER ================= */

.header{
  flex:0 0 150px;
  background:#2448b5;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 18px;
  box-shadow:inset 0 8px 10px rgba(255,255,255,.35),
             inset 0 -12px 16px rgba(0,0,0,.6);
}

.header img{ height:60px }

.titulo-svg{
  width:520px;
  height:120px;
}

.chapa{
  height:12px;
  background:#000;
}

/* ================= CONTENIDO ================= */

.contenido{
  flex:1;
  padding:16px 20px;
  overflow:hidden;
}

/* ================= PARTIDOS ================= */

.grupo{
  background:#fff;
  border-radius:10px;
  overflow:hidden;
  margin-top:6px;
}

.grupo-header{
  padding:8px 14px;
  font-weight:900;
  color:#fff;
  background:#2448b5;
}

.grupo-header.rojo{
  background:#b00000;
}

.linea{
  display:flex;
  padding:8px 10px;
  gap:8px;
  font-weight:900;
  border-top:1px solid #ddd;
}

.zkia{width:28px}
.etxekoa{color:#2448b5}
.kanpokoa{color:#b00000}
.lehiaketa{margin-left:auto}

/* ================= FOOTER ================= */

.footer{
  flex:0 0 150px;
  display:flex;
  flex-direction:column;
}

.pie-gris{
  background:#2f2f2f;
  padding:8px;
  flex:1;
}

.suelo{
  background:#6b6b6b;
  height:60px;
}

.logos-grid{
  display:grid;
  grid-template-columns:repeat(10,1fr);
  gap:8px;
}

.logo-item{
  background:#fff;
  padding:6px;
  border-radius:6px;
}

.logo-item img{
  width:100%;
  height:36px;
  object-fit:contain;
}

/* ================= PELOTAZOS ================= */

.pelotazos{
  position:absolute;
  inset:0;
  pointer-events:none;
}

.pelota{
  position:absolute;
  border-radius:50%;
  background:#000;
}

</style>
</head>

<body>

<div class="exportar">
<button onclick="exportar()">üì∏ DESKARGATU JPG</button>
</div>

<div id="paginas"></div>

<script>

/* ================= CONFIG DIN√ÅMICO ================= */

let CONTENIDO_MAX;

/* ================= UTIL ================= */

function alturaBloque(b){
  b.style.position="absolute";
  b.style.visibility="hidden";
  document.body.appendChild(b);
  const h=b.offsetHeight;
  document.body.removeChild(b);
  return h;
}

/* ================= LOGOS ================= */

const LOGOS=["aliprox.jpg","arbeondo.jpg","asadorepeleta.jpg","barainhoa.jpg","kotxera.jpg"];

function logosHTML(){
  return LOGOS.map(f=>`<div class="logo-item"><img src="/images/patrocinio/${f}"></div>`).join("");
}

/* ================= P√ÅGINA ================= */

function nuevaPagina(){

  const p=document.createElement("div");
  p.className="pagina";

  p.innerHTML=`
  <div class="pelotazos"></div>

  <div class="chapa"></div>

  <div class="header">

    <img src="/images/logo-larraun.png">

    <svg class="titulo-svg" viewBox="0 0 520 120">
      <defs>
        <path id="curva" d="M40 90 Q260 10 480 90"/>
      </defs>
      <text fill="white" font-size="36" font-weight="900">
        <textPath href="#curva" startOffset="50%" text-anchor="middle">
          LARRAUN PILOTA ELKARTEA
        </textPath>
      </text>
      <circle cx="260" cy="102" r="16" fill="#fff"/>
    </svg>

    <img src="/images/logo-fnp.png">

  </div>

  <div class="chapa"></div>

  <div class="contenido"></div>

  <div class="chapa"></div>

  <div class="footer">
    <div class="pie-gris">
      <div class="logos-grid">${logosHTML()}</div>
    </div>
    <div class="suelo"></div>
  </div>
  `;

  document.getElementById("paginas").appendChild(p);

  CONTENIDO_MAX=p.querySelector(".contenido").clientHeight;

  generarPelotazos(p);

  return p;
}

/* ================= PELOTAZOS ================= */

function generarPelotazos(p){
  const c=p.querySelector(".pelotazos");

  for(let i=0;i<2000;i++){
    const d=document.createElement("div");
    const s=Math.random()*4+2;

    d.className="pelota";
    d.style.width=d.style.height=s+"px";
    d.style.left=Math.random()*900+"px";
    d.style.top=Math.random()*1400+"px";
    d.style.opacity=Math.random()*0.2;

    c.appendChild(d);
  }
}

/* ================= EXPORTAR ================= */

async function exportar(){
  const paginas=[...document.querySelectorAll(".pagina")];
  let i=1;

  for(const p of paginas){
    const canvas=await html2canvas(p,{scale:2});
    const a=document.createElement("a");
    a.download=`kartela_${i++}.jpg`;
    a.href=canvas.toDataURL("image/jpeg");
    a.click();
  }
}

nuevaPagina();

</script>

</body>
</html>
