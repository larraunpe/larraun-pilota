<!DOCTYPE html>
<html lang="eu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Erreserbak Â· Reservas | Larraun Pilota Elkartea</title>

<style>
body { font-family: Arial, Helvetica, sans-serif; margin:0; background:#f4f4f4; color:#333; }
header { background:linear-gradient(90deg,#b30000,#006400); color:#fff; padding:20px; text-align:center; }
section { max-width:1100px; margin:auto; padding:30px 20px; }
.hidden { display:none; }

.login-box {
  max-width:400px;
  margin:60px auto;
  background:#fff;
  padding:30px;
  border-radius:8px;
  box-shadow:0 2px 10px rgba(0,0,0,.2);
}
.login-box input {
  width:100%;
  padding:10px;
  margin-bottom:15px;
  border-radius:6px;
  border:1px solid #ccc;
}
.login-box button {
  width:100%;
  padding:12px;
  background:#006400;
  color:#fff;
  border:none;
  border-radius:6px;
  font-size:1em;
  font-weight:bold;
  cursor:pointer;
}

.tabs { display:flex; gap:10px; margin-bottom:20px; }
.tab {
  padding:10px 20px;
  background:#ddd;
  border-radius:6px;
  cursor:pointer;
  font-weight:bold;
}
.tab.active { background:#006400; color:#fff; }

.day-select { margin-bottom:20px; }
.slots {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(120px,1fr));
  gap:10px;
}
.slot {
  padding:10px;
  text-align:center;
  border-radius:6px;
  cursor:pointer;
  font-size:0.9em;
}
.free { background:#d4edda; }
.booked { background:#f8d7da; cursor:not-allowed; }
.selected { background:#cce5ff; }

footer {
  background:#222;
  color:#fff;
  text-align:center;
  padding:15px;
  margin-top:40px;
}
</style>
</head>

<body>

<header>
  <h1>Frontoi & Trinquete erreserbak</h1>
  <p>Reservas de FrontÃ³n y Trinquete</p>
</header>

<section>

<div id="login" class="login-box">
  <h2>Sarbidea Â· Acceso</h2>
  <input type="text" id="user" placeholder="FITXA (usuario)">
  <input type="password" id="pass" placeholder="URTEA (contraseÃ±a)">
  <button onclick="login()">Sartu Â· Entrar</button>
  <p id="loginError" style="color:red;"></p>
</div>

<div id="reservas" class="hidden">
  <div class="tabs">
    <div class="tab active" onclick="setFacility('fronton',this)">FrontÃ³n</div>
    <div class="tab" onclick="setFacility('trinquete',this)">Trinquete</div>
  </div>

  <div class="day-select">
    <label>ðŸ“… DÃ­a:
      <input type="date" id="dayPicker">
    </label>
  </div>

  <div class="slots" id="slots"></div>

  <button style="margin-top:20px;" onclick="confirmBooking()">Confirmar reserva</button>
  <p id="info"></p>
</div>

</section>

<footer>Â© 2025 Larraun Pilota Elkartea</footer>

<script>
const users = {
  "P26726":"1985",
  "P26727":"1995",
  "P14541":"2001"
};

let currentUser = null;
let facility = "fronton";
let selectedSlots = [];

function login(){
  const u = user.value.trim();
  const p = pass.value.trim();
  if(users[u] && users[u] === p){
    currentUser = u;
    document.getElementById("login").classList.add("hidden");
    document.getElementById("reservas").classList.remove("hidden");
    initCalendar();
  } else {
    loginError.textContent = "Usuario o contraseÃ±a incorrectos";
  }
}

function setFacility(f,el){
  facility = f;
  document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
  el.classList.add("active");
  renderSlots();
}

function initCalendar(){
  const today = new Date();
  dayPicker.min = today.toISOString().split("T")[0];
  renderSlots();
}

function renderSlots(){
  slots.innerHTML = "";
  selectedSlots = [];
  for(let h=8; h<22; h++){
    ["00","30"].forEach(m=>{
      const time = `${String(h).padStart(2,"0")}:${m}`;
      const div = document.createElement("div");
      div.textContent = time;
      div.className = "slot free";
      div.onclick = ()=>toggleSlot(div,time);
      slots.appendChild(div);
    });
  }
}

function toggleSlot(div,time){
  if(div.classList.contains("selected")){
    div.classList.remove("selected");
    selectedSlots = selectedSlots.filter(t=>t!==time);
  } else {
    if(selectedSlots.length>=3){
      alert("MÃ¡ximo 1h30 por dÃ­a");
      return;
    }
    div.classList.add("selected");
    selectedSlots.push(time);
  }
}

function confirmBooking(){
  if(selectedSlots.length===0){
    alert("No hay tramos seleccionados");
    return;
  }
  const code = Math.floor(100000 + Math.random()*900000);
  info.innerHTML = "âœ… Reserva confirmada<br>CÃ³digo: <strong>"+code+"</strong>";
}
</script>

</body>
</html>
